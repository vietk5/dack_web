# ğŸ“‹ **DACK_WEB_NHOM1 (ElectroMart - Website bÃ¡n hÃ ng Ä‘iá»‡n tá»­)**

## ğŸ¯ **Tá»•ng quan dá»± Ã¡n**

Dá»± Ã¡n **ELECTROMART** - Website bÃ¡n hÃ ng Ä‘iá»‡n tá»­ trá»±c tuyáº¿n Ä‘Æ°á»£c xÃ¢y dá»±ng báº±ng **Java Servlet/JSP** vá»›i kiáº¿n trÃºc MVC.

## **ğŸ—ï¸CÃ´ng nghá»‡ sá»­ dá»¥ng:**
- **Framework:** Java Servlet/JSP (Jakarta EE 10)
- **ORM**: JPA (Jakarta Persistence) vá»›i EclipseLink 4.0.2
- **Database**: PostgreSQL (deployed trÃªn Render)
- **Build Tool**: Maven
- **Java Version**: 11
- **Server**: Jakarta Servlet 6.0
- **UI Reference**: [phongvu.vn](https://phongvu.vn/)

---

## ğŸ“ **Cáº¥u trÃºc thÆ° má»¥c chÃ­nh**
<img width="598" height="516" alt="image" src="https://github.com/user-attachments/assets/2b8d3699-1392-427a-882c-3f340dfcaa6e" />

---

## ğŸ¯ **CHá»¨C NÄ‚NG CHÃNH Cá»¦A Há»† THá»NG**
### **1. QUáº¢N LÃ NGÆ¯á»œI DÃ™NG**
+	ÄÄƒng kÃ½/ÄÄƒng nháº­p khÃ¡ch hÃ ng
+	QuÃªn máº­t kháº©u (gá»­i email reset)
+	PhÃ¢n quyá»n: Admin, NhÃ¢n viÃªn, KhÃ¡ch hÃ ng
+	Há»‡ thá»‘ng háº¡ng thÃ nh viÃªn (Báº C, VÃ€NG, KIM CÆ¯Æ NG)
+	Quáº£n lÃ½ thÃ´ng tin cÃ¡ nhÃ¢n
+	Quáº£n lÃ½ Ä‘á»‹a chá»‰ giao hÃ ng
+	Xem lá»‹ch sá»­ mua hÃ ng

### **2. QUáº¢N LÃ Sáº¢N PHáº¨M**
+	Hiá»ƒn thá»‹ danh sÃ¡ch sáº£n pháº©m (Laptop, PC, Phá»¥ kiá»‡n, MÃ n hÃ¬nh)
+	TÃ¬m kiáº¿m vÃ  lá»c sáº£n pháº©m theo loáº¡i, thÆ°Æ¡ng hiá»‡u
+	Chi tiáº¿t sáº£n pháº©m vá»›i thÃ´ng sá»‘ ká»¹ thuáº­t Ä‘áº§y Ä‘á»§
+	Autocomplete khi tÃ¬m kiáº¿m
+	So sÃ¡nh sáº£n pháº©m
+	ÄÃ¡nh giÃ¡ vÃ  bÃ¬nh luáº­n sáº£n pháº©m
+	Sáº£n pháº©m Ä‘á» xuáº¥t
+	Danh sÃ¡ch yÃªu thÃ­ch

### **3. GIá» HÃ€NG & THANH TOÃN**
+	ThÃªm/xÃ³a/cáº­p nháº­t giá» hÃ ng (lÆ°u trong Session)
+	Checkout vÃ  táº¡o Ä‘Æ¡n hÃ ng
+	Nhiá»u phÆ°Æ¡ng thá»©c thanh toÃ¡n
    - Thanh toÃ¡n khi nháº­n hÃ ng (COD)
    - Chuyá»ƒn khoáº£n ngÃ¢n hÃ ng
    - VÃ­ Ä‘iá»‡n tá»­
+	Ãp dá»¥ng phiáº¿u giáº£m giÃ¡
+	TÃ­nh phÃ­ váº­n chuyá»ƒn theo Ä‘á»‹a chá»‰
+	Chá»n thá»i gian giao hÃ ng

### **4. QUáº¢N LÃ ÄÆ N HÃ€NG**
+	Xem lá»‹ch sá»­ Ä‘Æ¡n hÃ ng
+	Theo dÃµi tráº¡ng thÃ¡i Ä‘Æ¡n (Má»šI, ÄANG Xá»¬ LÃ, ÄANG GIAO, HOÃ€N Táº¤T, Há»¦Y, TRáº¢ HÃ€NG, ÄÃƒ THANH TOÃN)
+	XÃ¡c nháº­n nháº­n hÃ ng
+	YÃªu cáº§u há»§y Ä‘Æ¡n
+	YÃªu cáº§u tráº£ hÃ ng/hoÃ n tiá»n
+	In hÃ³a Ä‘Æ¡n
+	ÄÃ¡nh giÃ¡ sáº£n pháº©m sau khi nháº­n hÃ ng

### **5. CHÆ¯Æ NG TRÃŒNH KHUYáº¾N MÃƒI**
+	Quáº£n lÃ½ mÃ£ giáº£m giÃ¡
+	Flash sale theo thá»i gian
+	Combo giáº£m giÃ¡
+	Æ¯u Ä‘Ã£i theo háº¡ng thÃ nh viÃªn
+	TÃ­ch Ä‘iá»ƒm Ä‘á»•i quÃ 
+	QuÃ  táº·ng sinh nháº­t

### **6. Há»– TRá»¢ KHÃCH HÃ€NG**
+	Chatbot tá»± Ä‘á»™ng
+	Live chat vá»›i nhÃ¢n viÃªn
+	Há»‡ thá»‘ng ticket há»— trá»£
+	FAQ - CÃ¢u há»i thÆ°á»ng gáº·p
+	ChÃ­nh sÃ¡ch báº£o hÃ nh
+	HÆ°á»›ng dáº«n mua hÃ ng/thanh toÃ¡n

### **7. ADMIN PANEL**
+	Dashboard (thá»‘ng kÃª tá»•ng quan)
+	Quáº£n lÃ½ sáº£n pháº©m (CRUD)
    - Quáº£n lÃ½ danh má»¥c
    - Quáº£n lÃ½ thÆ°Æ¡ng hiá»‡u
    - Quáº£n lÃ½ thuá»™c tÃ­nh sáº£n pháº©m
    - Quáº£n lÃ½ kho (nháº­p/xuáº¥t/tá»“n)
+	Quáº£n lÃ½ Ä‘Æ¡n hÃ ng
    - Xá»­ lÃ½ Ä‘Æ¡n hÃ ng má»›i
    - Quáº£n lÃ½ váº­n chuyá»ƒn
    - Xá»­ lÃ½ Ä‘Æ¡n há»§y/tráº£ hÃ ng
+	Quáº£n lÃ½ khÃ¡ch hÃ ng
    - PhÃ¢n háº¡ng khÃ¡ch hÃ ng
    - Quáº£n lÃ½ Ä‘iá»ƒm thÆ°á»Ÿng
    - Xá»­ lÃ½ khiáº¿u náº¡i
+	Quáº£n lÃ½ khuyáº¿n mÃ£i
    - Táº¡o mÃ£ giáº£m giÃ¡
    - Thiáº¿t láº­p flash sale
    - Quáº£n lÃ½ combo
+	BÃ¡o cÃ¡o doanh thu
    - Thá»‘ng kÃª theo thá»i gian
    - Thá»‘ng kÃª theo danh má»¥c
    - Thá»‘ng kÃª theo khu vá»±c
    - BÃ¡o cÃ¡o lá»£i nhuáº­n

---

## ğŸ“¦ **CHI TIáº¾T CÃC PACKAGE**

## **1. CONTROLLER PACKAGE (com.demo.controller)**
Xá»­ lÃ½ cÃ¡c request tá»« client vÃ  Ä‘iá»u hÆ°á»›ng tá»›i cÃ¡c service tÆ°Æ¡ng á»©ng.

### **Chá»©c nÄƒng ngÆ°á»i dÃ¹ng:**
<img width="784" height="528" alt="image" src="https://github.com/user-attachments/assets/dea2d0cd-27d3-4342-80fd-bcfc1e5a733d" />
- AuthController: Xá»­ lÃ½ Ä‘Äƒng nháº­p, Ä‘Äƒng kÃ½, quÃªn máº­t kháº©u
- UserController: Quáº£n lÃ½ thÃ´ng tin ngÆ°á»i dÃ¹ng
- ProfileController: Cáº­p nháº­t há»“ sÆ¡, Ä‘á»‹a chá»‰

### **Chá»©c nÄƒng mua hÃ ng:**
<img width="763" height="344" alt="image" src="https://github.com/user-attachments/assets/ff40aab2-f064-4847-b1bc-ad7e01f1ff3e" />
- ProductController: Hiá»ƒn thá»‹ vÃ  tÃ¬m kiáº¿m sáº£n pháº©m
- CartController: Quáº£n lÃ½ giá» hÃ ng
- CheckoutController: Xá»­ lÃ½ Ä‘áº·t hÃ ng
- PaymentController: Xá»­ lÃ½ thanh toÃ¡n

### **Admin Panel:**
<img width="771" height="342" alt="image" src="https://github.com/user-attachments/assets/62ccff8d-4da1-493a-be51-6729afa12125" />
- AdminController: Dashboard vÃ  thá»‘ng kÃª
- ProductManagementController: Quáº£n lÃ½ sáº£n pháº©m
- OrderManagementController: Quáº£n lÃ½ Ä‘Æ¡n hÃ ng
- UserManagementController: Quáº£n lÃ½ ngÆ°á»i dÃ¹ng

## **2. SERVICE PACKAGE (com.demo.service)**
Chá»©a business logic cá»§a á»©ng dá»¥ng.

### **Core Services:**
- UserService: Xá»­ lÃ½ logic ngÆ°á»i dÃ¹ng
- ProductService: Xá»­ lÃ½ logic sáº£n pháº©m
- OrderService: Xá»­ lÃ½ logic Ä‘Æ¡n hÃ ng
- CartService: Xá»­ lÃ½ logic giá» hÃ ng
- PaymentService: Xá»­ lÃ½ logic thanh toÃ¡n

### **Support Services:**
- EmailService: Gá»­i email
- FileService: Xá»­ lÃ½ file
- ValidationService: Kiá»ƒm tra dá»¯ liá»‡u
- CacheService: Quáº£n lÃ½ cache
- LogService: Ghi log

### **Admin Services:**
- ReportService: Táº¡o bÃ¡o cÃ¡o
- StatisticsService: Thá»‘ng kÃª
- InventoryService: Quáº£n lÃ½ kho

## **3. MODEL PACKAGE (com.demo.model)**
Chá»©a cÃ¡c entity vÃ  model cá»§a á»©ng dá»¥ng.

### **Entity chÃ­nh:**
<img width="625" height="698" alt="image" src="https://github.com/user-attachments/assets/e21baa4b-bd75-47ea-adfa-a070e8af4226" />
- User: ThÃ´ng tin ngÆ°á»i dÃ¹ng
- Product: ThÃ´ng tin sáº£n pháº©m
- Category: Danh má»¥c sáº£n pháº©m
- Brand: ThÆ°Æ¡ng hiá»‡u

### **Order (ÄÆ¡n hÃ ng):**
<img width="784" height="225" alt="image" src="https://github.com/user-attachments/assets/ddd24626-5a0d-46db-ac35-472282800339" />
- Order: ThÃ´ng tin Ä‘Æ¡n hÃ ng
- OrderItem: Chi tiáº¿t Ä‘Æ¡n hÃ ng
- OrderStatus: Tráº¡ng thÃ¡i Ä‘Æ¡n hÃ ng

### **Cart (Giá» hÃ ng):**
<img width="726" height="132" alt="image" src="https://github.com/user-attachments/assets/e2ba5723-f017-4305-af16-7e3cf31226c2" />
- Cart: ThÃ´ng tin giá» hÃ ng
- CartItem: Sáº£n pháº©m trong giá»

### **Warehouse (Kho):**
<img width="655" height="217" alt="image" src="https://github.com/user-attachments/assets/d83423e2-df68-495d-93a7-4c8991361c36" />
- Inventory: Tá»“n kho
- InventoryHistory: Lá»‹ch sá»­ nháº­p xuáº¥t
- Supplier: NhÃ  cung cáº¥p

### **Customer Support:**
<img width="634" height="132" alt="image" src="https://github.com/user-attachments/assets/a71d8921-630e-44f3-9e2c-2ef47a2d3338" />
- Ticket: Phiáº¿u há»— trá»£
- ChatMessage: Tin nháº¯n chat
- FAQ: CÃ¢u há»i thÆ°á»ng gáº·p

### **Helper Models:**
<img width="520" height="133" alt="image" src="https://github.com/user-attachments/assets/a61288d2-d384-465f-8db9-d7200453a594" />
- DTO: Data Transfer Objects
- ViewModels: Models cho view
- Requests/Responses: Models cho API

## **4. PERSISTENCE PACKAGE (com.demo.persistence)**
Xá»­ lÃ½ tÆ°Æ¡ng tÃ¡c vá»›i database.

**Pattern: Generic DAO vá»›i JPA**
<img width="784" height="368" alt="image" src="https://github.com/user-attachments/assets/3fcbff99-03ae-4e6a-9de6-11c9f4d967f5" />

**TÃ­nh nÄƒng GenericDAO:**
+	CRUD: find(), findAll(), save(), update(), delete()
+	Pagination: findAll(page, size, orderBy, asc)
+	Dynamic query: findWhere(whereClause, params)
+	Transaction: inTransaction(), inTransactionVoid()
+	Count: count()

### **Repository Classes:**
- UserRepository
- ProductRepository
- OrderRepository
- CartRepository
- InventoryRepository

## **5. UTIL PACKAGE (com.demo.util)**
Chá»©a cÃ¡c utility class vÃ  helper functions.

### **Helper Classes:**
- SecurityUtil: MÃ£ hÃ³a vÃ  báº£o máº­t
- DateUtil: Xá»­ lÃ½ ngÃ y thÃ¡ng
- StringUtil: Xá»­ lÃ½ chuá»—i
- ValidationUtil: Kiá»ƒm tra dá»¯ liá»‡u
- FileUtil: Xá»­ lÃ½ file

### **Constants:**
- AppConstants: Háº±ng sá»‘ á»©ng dá»¥ng
- SecurityConstants: Háº±ng sá»‘ báº£o máº­t
- MessageConstants: ThÃ´ng Ä‘iá»‡p

## **6. FILTER PACKAGE (com.electromart.filter)**
Xá»­ lÃ½ request/response trÆ°á»›c khi Ä‘áº¿n controller.

### **Security Filters:**
- AuthenticationFilter: XÃ¡c thá»±c ngÆ°á»i dÃ¹ng
- AuthorizationFilter: PhÃ¢n quyá»n
- JWTFilter: Xá»­ lÃ½ JWT

### **Other Filters:**
- LoggingFilter: Ghi log
- CORSFilter: Xá»­ lÃ½ CORS
- EncodingFilter: Xá»­ lÃ½ encoding

## **7. ENUMS PACKAGE (com.demo.enums)**
Chá»©a cÃ¡c enum cá»§a há»‡ thá»‘ng.
<img width="787" height="244" alt="image" src="https://github.com/user-attachments/assets/cdb9a1f8-9b75-409d-9930-6e8f02e21005" />

### **Main Enums:**
- UserRole: ADMIN, STAFF, CUSTOMER
- OrderStatus: NEW, PROCESSING, SHIPPING, COMPLETED, etc.
- PaymentMethod: COD, BANK_TRANSFER, E_WALLET
- MembershipTier: SILVER, GOLD, DIAMOND

## ğŸ¨ **VIEW STRUCTURE (JSP Files)**

### **1. Layout Templates**
```
webapp/WEB-INF/views/
â”œâ”€â”€ layout_header.jspf          # Header chung cho user
â”œâ”€â”€ layout_footer.jspf          # Footer chung cho user
â”œâ”€â”€ layout_admin_header.jspf    # Header cho admin panel
â””â”€â”€ layout_admin_footer.jspf    # Footer cho admin panel
```

### **2. User Interface Pages**
```
webapp/WEB-INF/views/
â”œâ”€â”€ home.jsp              # Trang chá»§
â”œâ”€â”€ login.jsp            # ÄÄƒng nháº­p
â”œâ”€â”€ register.jsp         # ÄÄƒng kÃ½
â”œâ”€â”€ forgot-password.jsp  # QuÃªn máº­t kháº©u
â”œâ”€â”€ reset-password.jsp   # Äáº·t láº¡i máº­t kháº©u
â”œâ”€â”€ profile.jsp          # Trang cÃ¡ nhÃ¢n
â””â”€â”€ search.jsp           # Trang káº¿t quáº£ tÃ¬m kiáº¿m
```

### **3. Product Related Pages**
```
webapp/WEB-INF/views/
â”œâ”€â”€ product_detail.jsp   # Chi tiáº¿t sáº£n pháº©m
â”œâ”€â”€ category.jsp         # Danh sÃ¡ch theo danh má»¥c
â”œâ”€â”€ compare.jsp          # So sÃ¡nh sáº£n pháº©m
â””â”€â”€ promotions.jsp       # Trang khuyáº¿n mÃ£i
```

### **4. Shopping Related Pages**
```
webapp/WEB-INF/views/
â”œâ”€â”€ cart.jsp             # Giá» hÃ ng
â”œâ”€â”€ checkout.jsp         # Thanh toÃ¡n
â”œâ”€â”€ payment_result.jsp   # Káº¿t quáº£ thanh toÃ¡n
â”œâ”€â”€ orders.jsp           # Danh sÃ¡ch Ä‘Æ¡n hÃ ng
â””â”€â”€ order_detail.jsp     # Chi tiáº¿t Ä‘Æ¡n hÃ ng
```

### **5. Support Pages**
```
webapp/WEB-INF/views/
â”œâ”€â”€ chatbot.jsp          # Chatbot há»— trá»£
â”œâ”€â”€ faq.jsp              # CÃ¢u há»i thÆ°á»ng gáº·p
â””â”€â”€ contact.jsp          # LiÃªn há»‡
```

### **6. Admin Panel Pages**
```
webapp/WEB-INF/views/admin/
â”œâ”€â”€ dashboard.jsp            # Trang tá»•ng quan
â”œâ”€â”€ products/
â”‚   â”œâ”€â”€ list.jsp            # Danh sÃ¡ch sáº£n pháº©m
â”‚   â”œâ”€â”€ add.jsp             # ThÃªm sáº£n pháº©m
â”‚   â””â”€â”€ edit.jsp            # Sá»­a sáº£n pháº©m
â”œâ”€â”€ orders/
â”‚   â”œâ”€â”€ list.jsp            # Danh sÃ¡ch Ä‘Æ¡n hÃ ng
â”‚   â””â”€â”€ detail.jsp          # Chi tiáº¿t Ä‘Æ¡n hÃ ng
â”œâ”€â”€ users/
â”‚   â”œâ”€â”€ list.jsp            # Danh sÃ¡ch ngÆ°á»i dÃ¹ng
â”‚   â””â”€â”€ edit.jsp            # Sá»­a thÃ´ng tin ngÆ°á»i dÃ¹ng
â”œâ”€â”€ promotions/
â”‚   â”œâ”€â”€ list.jsp            # Danh sÃ¡ch khuyáº¿n mÃ£i
â”‚   â””â”€â”€ edit.jsp            # Quáº£n lÃ½ khuyáº¿n mÃ£i
â””â”€â”€ reports/
    â”œâ”€â”€ sales.jsp           # BÃ¡o cÃ¡o doanh sá»‘
    â”œâ”€â”€ inventory.jsp       # BÃ¡o cÃ¡o kho
    â””â”€â”€ customers.jsp       # BÃ¡o cÃ¡o khÃ¡ch hÃ ng
```

### **7. Partial Views**
```
webapp/WEB-INF/views/partials/
â”œâ”€â”€ product_card.jsp        # Card hiá»ƒn thá»‹ sáº£n pháº©m
â”œâ”€â”€ pagination.jsp          # PhÃ¢n trang
â”œâ”€â”€ breadcrumb.jsp          # Breadcrumb navigation
â”œâ”€â”€ filter_sidebar.jsp      # Sidebar lá»c sáº£n pháº©m
â””â”€â”€ notification.jsp        # ThÃ´ng bÃ¡o
```

### **8. Error Pages**
```
webapp/WEB-INF/views/errors/
â”œâ”€â”€ 404.jsp                # Trang khÃ´ng tá»“n táº¡i
â”œâ”€â”€ 403.jsp                # KhÃ´ng cÃ³ quyá»n truy cáº­p
â”œâ”€â”€ 500.jsp                # Lá»—i server
â””â”€â”€ maintenance.jsp        # Báº£o trÃ¬
```

### **9. Email Templates**
```
webapp/WEB-INF/views/emails/
â”œâ”€â”€ welcome.jsp            # Email chÃ o má»«ng
â”œâ”€â”€ order_confirmation.jsp # XÃ¡c nháº­n Ä‘Æ¡n hÃ ng
â”œâ”€â”€ shipping_update.jsp    # Cáº­p nháº­t váº­n chuyá»ƒn
â”œâ”€â”€ reset_password.jsp     # Äáº·t láº¡i máº­t kháº©u
â””â”€â”€ newsletter.jsp         # Template newsletter
```

### **10. Asset Structure**
```
webapp/assets/
â”œâ”€â”€ css/
â”‚   â”œâ”€â”€ site.css          # CSS chung
â”‚   â”œâ”€â”€ admin.css         # CSS cho admin panel
â”‚   â””â”€â”€ responsive.css    # CSS responsive
â”œâ”€â”€ js/
â”‚   â”œâ”€â”€ site.js           # JavaScript chung
â”‚   â”œâ”€â”€ cart.js           # Logic giá» hÃ ng
â”‚   â”œâ”€â”€ validation.js     # Validate form
â”‚   â””â”€â”€ admin.js          # JS cho admin panel
â””â”€â”€ img/
    â”œâ”€â”€ logo/             # Logo website
    â”œâ”€â”€ banners/          # áº¢nh banner
    â”œâ”€â”€ products/         # áº¢nh sáº£n pháº©m
    â””â”€â”€ icons/            # Icon vÃ  svg
```

## ğŸ’¾ **DATABASE CONFIGURATION**

### **1. Database Information**
```properties
Database Type: PostgreSQL
Version: 14.0 or higher
Character Set: UTF-8
Collation: en_US.UTF-8
```

### **2. JPA Configuration (persistence.xml)**
```xml
<persistence-unit name="ElectroMartPU" transaction-type="RESOURCE_LOCAL">
    <provider>org.eclipse.persistence.jpa.PersistenceProvider</provider>
    
    <!-- Entity Classes -->
    <class>com.demo.model.User</class>
    <class>com.demo.model.Product</class>
    <class>com.demo.model.Order</class>
    <!-- Other entity classes... -->

    <properties>
        <!-- Database Connection -->
        <property name="jakarta.persistence.jdbc.url" 
                  value="jdbc:postgresql://[host]:[port]/electromart_db"/>
        <property name="jakarta.persistence.jdbc.user" value="your_username"/>
        <property name="jakarta.persistence.jdbc.password" value="your_password"/>
        <property name="jakarta.persistence.jdbc.driver" 
                  value="org.postgresql.Driver"/>

        <!-- EclipseLink Properties -->
        <property name="eclipselink.logging.level" value="FINE"/>
        <property name="eclipselink.logging.parameters" value="true"/>
        <property name="eclipselink.cache.shared.default" value="false"/>
        <property name="eclipselink.weaving" value="static"/>
    </properties>
</persistence-unit>
```

### **3. Database Schema**

#### **Core Tables**
```sql
-- Users & Authentication
CREATE TABLE users (
    id SERIAL PRIMARY KEY,
    username VARCHAR(50) UNIQUE NOT NULL,
    email VARCHAR(100) UNIQUE NOT NULL,
    password_hash VARCHAR(255) NOT NULL,
    role VARCHAR(20) NOT NULL,
    status VARCHAR(20) NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- Products
CREATE TABLE products (
    id SERIAL PRIMARY KEY,
    name VARCHAR(200) NOT NULL,
    sku VARCHAR(50) UNIQUE NOT NULL,
    description TEXT,
    price DECIMAL(15,2) NOT NULL,
    category_id INT REFERENCES categories(id),
    brand_id INT REFERENCES brands(id),
    stock_quantity INT DEFAULT 0,
    status VARCHAR(20) DEFAULT 'ACTIVE'
);

-- Categories
CREATE TABLE categories (
    id SERIAL PRIMARY KEY,
    name VARCHAR(100) NOT NULL,
    parent_id INT REFERENCES categories(id),
    slug VARCHAR(100) UNIQUE NOT NULL,
    description TEXT
);
```

#### **Order Management**
```sql
-- Orders
CREATE TABLE orders (
    id SERIAL PRIMARY KEY,
    user_id INT REFERENCES users(id),
    total_amount DECIMAL(15,2) NOT NULL,
    status VARCHAR(20) NOT NULL,
    payment_method VARCHAR(50),
    shipping_address_id INT REFERENCES addresses(id),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- Order Items
CREATE TABLE order_items (
    id SERIAL PRIMARY KEY,
    order_id INT REFERENCES orders(id),
    product_id INT REFERENCES products(id),
    quantity INT NOT NULL,
    price_at_time DECIMAL(15,2) NOT NULL,
    UNIQUE(order_id, product_id)
);
```

#### **Customer Management**
```sql
-- Customer Profiles
CREATE TABLE customer_profiles (
    id SERIAL PRIMARY KEY,
    user_id INT REFERENCES users(id),
    first_name VARCHAR(50),
    last_name VARCHAR(50),
    phone VARCHAR(20),
    membership_tier VARCHAR(20),
    points INT DEFAULT 0
);

-- Addresses
CREATE TABLE addresses (
    id SERIAL PRIMARY KEY,
    user_id INT REFERENCES users(id),
    address_line1 VARCHAR(255) NOT NULL,
    address_line2 VARCHAR(255),
    city VARCHAR(100) NOT NULL,
    state VARCHAR(100) NOT NULL,
    postal_code VARCHAR(20),
    is_default BOOLEAN DEFAULT false
);
```

#### **Inventory Management**
```sql
-- Inventory Transactions
CREATE TABLE inventory_transactions (
    id SERIAL PRIMARY KEY,
    product_id INT REFERENCES products(id),
    quantity INT NOT NULL,
    type VARCHAR(20) NOT NULL, -- IN/OUT
    reference_type VARCHAR(50), -- ORDER/RESTOCK
    reference_id INT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- Suppliers
CREATE TABLE suppliers (
    id SERIAL PRIMARY KEY,
    name VARCHAR(200) NOT NULL,
    contact_person VARCHAR(100),
    email VARCHAR(100),
    phone VARCHAR(20),
    address TEXT
);
```

#### **Promotion & Marketing**
```sql
-- Promotions
CREATE TABLE promotions (
    id SERIAL PRIMARY KEY,
    code VARCHAR(50) UNIQUE NOT NULL,
    type VARCHAR(20) NOT NULL,
    discount_value DECIMAL(15,2) NOT NULL,
    minimum_purchase DECIMAL(15,2),
    start_date TIMESTAMP NOT NULL,
    end_date TIMESTAMP NOT NULL,
    usage_limit INT,
    used_count INT DEFAULT 0
);

-- Product Reviews
CREATE TABLE product_reviews (
    id SERIAL PRIMARY KEY,
    product_id INT REFERENCES products(id),
    user_id INT REFERENCES users(id),
    rating INT NOT NULL CHECK (rating BETWEEN 1 AND 5),
    comment TEXT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

### **4. Database Indexes**
```sql
-- Performance Indexes
CREATE INDEX idx_products_category ON products(category_id);
CREATE INDEX idx_products_brand ON products(brand_id);
CREATE INDEX idx_orders_user ON orders(user_id);
CREATE INDEX idx_orders_status ON orders(status);
CREATE INDEX idx_order_items_order ON order_items(order_id);
CREATE INDEX idx_order_items_product ON order_items(product_id);
CREATE INDEX idx_inventory_product ON inventory_transactions(product_id);
CREATE INDEX idx_promotions_code ON promotions(code);
CREATE INDEX idx_product_reviews_product ON product_reviews(product_id);
```

### **5. Database Views**
```sql
-- Product Details View
CREATE VIEW vw_product_details AS
SELECT 
    p.id, p.name, p.price, p.description,
    c.name as category_name,
    b.name as brand_name,
    COALESCE(r.avg_rating, 0) as average_rating,
    COALESCE(r.review_count, 0) as review_count
FROM products p
LEFT JOIN categories c ON p.category_id = c.id
LEFT JOIN brands b ON p.brand_id = b.id
LEFT JOIN (
    SELECT product_id, 
           AVG(rating) as avg_rating,
           COUNT(*) as review_count
    FROM product_reviews
    GROUP BY product_id
) r ON p.id = r.product_id;

-- Order Summary View
CREATE VIEW vw_order_summary AS
SELECT 
    o.id, o.created_at,
    u.username,
    COUNT(oi.id) as total_items,
    o.total_amount,
    o.status
FROM orders o
JOIN users u ON o.user_id = u.id
JOIN order_items oi ON o.id = oi.order_id
GROUP BY o.id, u.username;
```

### **6. Stored Procedures**
```sql
-- Update Product Stock
CREATE OR REPLACE PROCEDURE update_product_stock(
    p_product_id INT,
    p_quantity INT,
    p_type VARCHAR
)
LANGUAGE plpgsql
AS $$
BEGIN
    IF p_type = 'IN' THEN
        UPDATE products 
        SET stock_quantity = stock_quantity + p_quantity
        WHERE id = p_product_id;
    ELSIF p_type = 'OUT' THEN
        UPDATE products 
        SET stock_quantity = stock_quantity - p_quantity
        WHERE id = p_product_id;
    END IF;
    
    INSERT INTO inventory_transactions (
        product_id, quantity, type
    ) VALUES (
        p_product_id, p_quantity, p_type
    );
    
    COMMIT;
END;
$$;

-- Calculate Order Total
CREATE OR REPLACE FUNCTION calculate_order_total(p_order_id INT)
RETURNS DECIMAL AS $$
BEGIN
    RETURN (
        SELECT SUM(quantity * price_at_time)
        FROM order_items
        WHERE order_id = p_order_id
    );
END;
$$ LANGUAGE plpgsql;

## ğŸ”„ **CORE WORKFLOWS**

### **1. User Registration & Authentication Flow**
```mermaid
graph TD
    A[Visitor] -->|Click Register| B[Registration Form]
    B -->|Submit Form| C{Validate Input}
    C -->|Invalid| B
    C -->|Valid| D[Create User Account]
    D -->|Send Email| E[Verification Email]
    E -->|Click Link| F[Verify Account]
    F -->|Success| G[Login Page]
    G -->|Enter Credentials| H{Validate Login}
    H -->|Invalid| G
    H -->|Valid| I[User Dashboard]
```

### **2. Shopping & Checkout Process**
```mermaid
graph TD
    A[Browse Products] -->|Add to Cart| B[Shopping Cart]
    B -->|Update Quantity| B
    B -->|Remove Item| B
    B -->|Proceed to Checkout| C[Checkout Page]
    C -->|Enter Shipping Info| D[Choose Payment Method]
    D -->|COD| E[Place Order]
    D -->|Bank Transfer| F[Payment Gateway]
    F -->|Payment Success| E
    F -->|Payment Failed| D
    E -->|Create Order| G[Order Confirmation]
    G -->|Send Email| H[Order Notification]
```

### **3. Order Processing Workflow**
```mermaid
graph TD
    A[New Order] -->|Staff Review| B{Check Stock}
    B -->|In Stock| C[Process Order]
    B -->|Out of Stock| D[Contact Supplier]
    D -->|Restock| C
    C -->|Pack Items| E[Ready for Shipping]
    E -->|Assign Shipper| F[In Transit]
    F -->|Delivery Success| G[Complete]
    F -->|Delivery Failed| H[Return to Warehouse]
    G -->|After 7 days| I[Allow Review]
```

### **4. Customer Support Flow**
```mermaid
graph TD
    A[Customer Issue] -->|Chatbot| B{Can Resolve?}
    B -->|Yes| C[Provide Solution]
    B -->|No| D[Create Support Ticket]
    D -->|Assign Staff| E[Staff Review]
    E -->|Need Info| F[Request Customer]
    F -->|Customer Reply| E
    E -->|Can Resolve| G[Propose Solution]
    G -->|Customer Accept| H[Close Ticket]
    G -->|Customer Reject| E
```

### **5. Inventory Management Flow**
```mermaid
graph TD
    A[Monitor Stock] -->|Low Stock| B[Generate PO]
    B -->|Send to Supplier| C[Wait Response]
    C -->|Confirm Order| D[Process Payment]
    D -->|Payment Complete| E[Wait Delivery]
    E -->|Receive Items| F[Quality Check]
    F -->|Pass| G[Update Inventory]
    F -->|Fail| H[Return to Supplier]
    G -->|Stock Updated| I[Update Product Status]
```

### **6. Admin Dashboard Workflow**
```mermaid
graph TD
    A[Admin Login] -->|Success| B[Dashboard Overview]
    B -->|View Reports| C[Generate Reports]
    C -->|Daily Sales| D[Sales Analysis]
    C -->|Inventory| E[Stock Status]
    C -->|Customer| F[Customer Analysis]
    B -->|Manage Orders| G[Order Management]
    B -->|Manage Products| H[Product Management]
    B -->|Manage Users| I[User Management]
```

### **7. Marketing Campaign Flow**
```mermaid
graph TD
    A[Plan Campaign] -->|Create| B[Set Parameters]
    B -->|Configure| C[Set Products]
    C -->|Set Timing| D[Schedule Campaign]
    D -->|Launch| E[Active Campaign]
    E -->|Monitor| F{Performance Check}
    F -->|Good| G[Continue]
    F -->|Poor| H[Adjust Parameters]
    H -->|Update| E
    G -->|End Date| I[Campaign Report]
```

### **8. Payment Processing Flow**
```mermaid
graph TD
    A[Select Payment] -->|COD| B[Verify Address]
    A -->|Bank Transfer| C[Generate Details]
    A -->|E-Wallet| D[Connect Gateway]
    B -->|Valid| E[Create Order]
    C -->|Payment Received| E
    D -->|Payment Success| E
    E -->|Process| F[Order Created]
    F -->|Send| G[Email Confirmation]
    D -->|Payment Failed| H[Show Error]
```

---

## ğŸš€ **HÆ°á»›ng dáº«n cÃ i Ä‘áº·t vÃ  cháº¡y dá»± Ã¡n**

### **YÃªu cáº§u há»‡ thá»‘ng**
- JDK 11 trá»Ÿ lÃªn
- Apache Maven 3.8+
- PostgreSQL
- IDE há»— trá»£ Java Web (khuyáº¿n nghá»‹: NetBeans, IntelliJ IDEA, Eclipse)

### **CÃ¡c bÆ°á»›c cÃ i Ä‘áº·t**

1. **Clone repository**
```bash
git clone [repository-url]
cd DACK_WEB_NHOM1
```

2. **Cáº¥u hÃ¬nh database**
- Táº¡o database PostgreSQL má»›i
- Cáº­p nháº­t thÃ´ng tin káº¿t ná»‘i trong `src/main/resources/META-INF/persistence.xml`

3. **Build project**
```bash
mvn clean install
```

4. **Cháº¡y á»©ng dá»¥ng**
- Deploy file WAR trong thÆ° má»¥c `target` vÃ o application server
- Hoáº·c cháº¡y trá»±c tiáº¿p trong IDE vá»›i server tÃ­ch há»£p

5. **Truy cáº­p á»©ng dá»¥ng**
- Má»Ÿ trÃ¬nh duyá»‡t vÃ  truy cáº­p: `http://localhost:8080/DACK_WEB_NHOM1`

### **TÃ i khoáº£n máº·c Ä‘á»‹nh**
- **Admin**: admin@electromart.com / admin123
- **NhÃ¢n viÃªn**: staff@electromart.com / staff123
- **KhÃ¡ch hÃ ng**: customer@electromart.com / customer123

---

## ğŸ“± **Demo & Screenshots**

### **Trang chá»§**
[ThÃªm áº£nh screenshot trang chá»§]

### **Trang sáº£n pháº©m**
[ThÃªm áº£nh screenshot trang sáº£n pháº©m]

### **Giá» hÃ ng & Thanh toÃ¡n**
[ThÃªm áº£nh screenshot giá» hÃ ng vÃ  thanh toÃ¡n]

### **Admin Dashboard**
[ThÃªm áº£nh screenshot admin dashboard]

---

## ğŸ‘¥ **ThÃ nh viÃªn nhÃ³m**
1. [TÃªn thÃ nh viÃªn 1] - [MSSV] - [Vai trÃ²]
2. [TÃªn thÃ nh viÃªn 2] - [MSSV] - [Vai trÃ²]
3. [TÃªn thÃ nh viÃªn 3] - [MSSV] - [Vai trÃ²]

---

## ğŸ“ **BÃ¡o cÃ¡o lá»—i & ÄÃ³ng gÃ³p**
Náº¿u báº¡n tÃ¬m tháº¥y lá»—i hoáº·c cÃ³ Ä‘á» xuáº¥t cáº£i tiáº¿n, vui lÃ²ng:
1. Táº¡o issue má»›i trong repository
2. MÃ´ táº£ chi tiáº¿t váº¥n Ä‘á» hoáº·c Ä‘á» xuáº¥t
3. ÄÃ­nh kÃ¨m áº£nh chá»¥p mÃ n hÃ¬nh náº¿u cáº§n thiáº¿t

---

## ğŸ“œ **License**
Â© 2023 ElectroMart. All rights reserved.

**ğŸ“ Note**: ÄÃ¢y lÃ  Ä‘á»“ Ã¡n cuá»‘i ká»³ 1/2025-2026 mÃ´n Láº¬P TRÃŒNH WEB.

